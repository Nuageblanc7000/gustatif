{% extends "base.html.twig" %}
{% set errors =  form.vars.errors[0].messageParameters is defined ?  form.vars.errors[0].messageParameters : [] %}
{% set days = ['lundi','mardi','mercredi','jeudi','vendredi','samedi','dimanche'] %}
{% block body %}


	<div class="container-main-schedule">
		<div class="title-form-schedule">
			<h1>
				{% trans %}Créer l'horaire de votre établissement
				{% endtrans %}</h1>

                <div class="js-timer">
                <span class="js-h"></span>
                <i>:</i>
                <span class="js-m"></span>
                <i>:</i>
                <span class="js-s"></span>
                </div>
		</div>
		<div class="container-form-schedule">
			{{form_start(form)}}
		<div class="legend-form-schedule">
        <h2>{% trans %}Bon à savoir {% endtrans %}</h2>
		
				<span class="close-pannel"> <img src="/build/images/close.svg" alt="panneau fermé"></span>
				<span>{% trans %}Laissé les champs vides si l'établissement est fermé. {% endtrans %}</span>

			</span>
		</div>
			<div class="form-step">
				<div class="form-group-times title-group-time">
					<span>
						{% trans %}
						Jour
						{% endtrans %}</span>
					<span>{% trans %}
						Ouverture
						{% endtrans %}
					</span>
					<span>{% trans %}Fermeture
						{% endtrans %}</span>
				</div>

				{% for key,time in form.timetables %}
					{% set index = loop.index %}
					<div class="form-group-times {% for error in errors %} {% if error == index %} bg-error-time  {% endif %}{% endfor %}">
						{{days[key]}}
						<div class="d-flex flex-column">
							{{form_widget(time.open)}}
						</div>
						<div class="d-flex flex-column">
							{{form_widget(time.close)}}
						</div>
					</div>
					<div class="form-groups-errors">
						{% if  form_errors(time.open) %}
							<div class="form-message-errors">
								{{form_errors(time.open)}}
							</div>
							<div class="form-message-errors">
								{{form_errors(time.close)}}
							</div>
						{% endif %}
					</div>
				{% endfor %}
				<div class="form-message-errors">
					{{form_errors(form)}}
				</div>
				<button type="submit">
					{% trans %}Sauvegarder l'horaire
					{% endtrans %}</button>
			</div>
			{{form_rest(form)}}
			{{form_end(form)}}
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	{{ encore_entry_script_tags('time') }}
{% endblock %}
